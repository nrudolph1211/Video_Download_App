[phases.setup]
nixPkgs = ["python3", "python3Packages.pip", "python3Packages.setuptools", "python3Packages.wheel", "ffmpeg", "git", "gcc"]

[phases.install]
cmds = [
    "python3 -m pip install --upgrade pip",
    "python3 -m pip install -r requirements.txt",
    "ffmpeg -version"
]

[phases.build]
cmds = [
    "python3 -c 'import flask; print(\"Flask installed successfully\")'",
    "python3 -c 'import yt_dlp; print(\"yt-dlp installed successfully\")'",
    "echo 'Build complete'"
]

[start]
cmd = "gunicorn --bind 0.0.0.0:$PORT app:app"
